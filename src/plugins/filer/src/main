"---------------------------------
" vim:set ft=vim:
"
" 2014/09/12 ryo
" Filer plugin
"
" see => 
"---------------------------------

source $plugins_filer/src/command
source $plugins_filer/src/entry
source $plugins_filer/src/layout

let $filerworkfile = $plugins_filer . '/workfiles/tree.filerworkfile'
let $fileworkfilebufnum = 0

source $plugins_filer/src/syntax

augroup filer
	autocmd!
	autocmd VimEnter * :call Toggle() | :call OutputNewTree()
	autocmd VimEnter * :cd $devroot

	autocmd BufEnter *.filerworkfile call KeyMapping()
	autocmd BufEnter *.filerworkfile source $plugins_filer/src/syntax

	autocmd BufLeave *.filerworkfile call Close() | let $isOpen = 0
augroup END

function! KeyMapping()
	nnoremap <buffer> R    :call ActionReload()<CR>
	nnoremap <buffer> <CR> :call ActionEnter()<CR>
endfunction
